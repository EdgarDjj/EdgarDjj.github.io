# 网站架构


# 网站架构

大型网站软件系统的特点：

* 高并发、大流量
* 高可用：系统需要不间断提供服务
* 海量数据
* 用户分布广泛，网络情况复杂
* 安全环境恶劣
* 需求快速变更，发布频繁
* 渐进式发展：几乎所有大网站都是从一个小网站开始的

## 发展历程

1. 初始阶段的网络架构：

应用程序、数据库、文件等所有资源都在同一台服务器上

2. 应用服务和数据库分离：

网站使用三台服务器：应用服务器、文件服务器和数据库服务器

3. 使用缓存改善性能：

使用缓存后，数据库的压力得到释放且性能提高

4. 使用服务器集群改善网站的并发处理能力：

通过负载均衡调度服务器将请求分配到集群中的服务器上

5. 数据库读写分离：

 应用服务器在写数据的时候访问主数据库，主数据库通过主从复制机制将数据更新同步到从数据库，这样读数据的时候就可以通过从数据库了

6. 使用反向代理和CDN加速网络响应
7. 使用分布式文件系统和分布式数据库系统
8. 使用Nosql和搜索引擎
9. 业务拆分
10. 分布式服务

## 架构模式

### 一、分层

初步可以将网站软件系统分为：应用层、服务层、数据层后续还可以继续分层

### 二、分割

网站越大，功能越复杂，因此服务和处理的种类越多，将这些不同的功能和服务分割开，包装成高内聚低耦合的模块。有助于开发和维护，同时便于不同模块的分布式部署，提高网站的并发和处理能力和功能拓展能力

### 三、分布式

分层和分割的一个主要目的是为了切分后的模块便于分布式部署，及不同模块部署到不同的服务器上，通过远程调用协同工作。分布式意味着使用更多的计算机完成同一功能，能并发处理的资源和数据量就越多。

* 分布式应用和服务
* 分布式静态资源
* 分布式数据和存储
* 分布式计算

### 四、集群

使用分布式虽然已经将分层和分割后的模块独立部署，但是对于用户访问集中的模块（比如网页的首页）还需要将独立部署的服务器集群化，将多台服务器部署相同应用构成一个集群，通过负载均衡设备共同对外提供服务，当用户更多的时候，仅需向集群中增加服务器即可。

### 五、缓存

CDN、反向代理、本地缓存、分布式缓存

### 六、异步

在单一服务器可通过多线程共享队列的方式实现异步，处在业务操作前面的线程将输出写入到队列，后面的线程从队列中读取数据进行处理。在分布式系统中，多个服务器集群通过分布式消息队列实现异步，分布式消息队列可以看做内存队列的分布式部署。

* 提供系统可用性
* 加快网站响应速度
* 消除并发访问高峰：使用消息队列放入消息队列里依次进行处理，降低网站的负载

### 七、冗余

数据库除了定期备份，存档保存，实现冷备份之外，为了保证在线业务高可用，还需要对数据库进行主从分离，实时同步实现热备份。

### 八、自动化

在无人值守的情况下，一切自动化（理想化）

不知道是否可通过机器学习，进行服务器参数的自我调整（自我猜想）

### 九、安全

## 架构要素

* 性能
* 可用性
* 伸缩性
* 拓展性
* 安全性


